{% extends "base.html" %}

{% block title %}Team Summary{% endblock %}

{% block content %}
<div style="padding: 2rem; max-width: 1200px; margin: auto;">
    <h1 style="font-size: 2.5rem; margin-bottom: 2rem; text-align: center;">User Progress Dashboard</h1>

    <form method="get" style="display: flex; justify-content: center; gap: 1rem; margin-bottom: 2rem;">
        <label for="team">Select Team:</label>
        <select name="team" id="team" class="button" style="padding: 0.5rem; border-radius: 8px; border: 1px solid #ccc;">
    {% for team in teams %}
        <option value="{{ team.teamId }}" {% if team.teamId|stringformat:"s" == selected_team_id %}selected{% endif %}>{{ team.teamName }}</option>
    {% endfor %}
</select>
        <label for="session_date">Select Session Date:</label>
        <select name="session_date" id="session_date" class="button" style="padding: 0.5rem; border-radius: 8px; border: 1px solid #ccc;">
            {% for date in sessions %}
                <option value="{{ date|date:"Y-m-d" }}" {% if date|date:"Y-m-d" == selected_date %}selected{% endif %}>{{ date|date:"Y-m-d" }}</option>
            {% endfor %}
        </select>

        <button type="submit" class="button" style="background-color: #0277bd; padding: 0.5rem 1rem;">Show Summary</button>
    </form>

    {% if summary %}
    <h2 style="text-align: center; font-size: 2rem; margin-bottom: 1rem;">Votes Summary</h2>
    <div style="overflow-x: auto;">
        <table style="width: 100%; border-collapse: collapse; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); background-color: white;">
            <thead style="background-color: #0288d1; color: white;">
                <tr>
                    <th style="padding: 1rem; text-align: center;">Card Name</th>
                    <th style="padding: 1rem; text-align: center;">Vote</th>
                    <th style="padding: 1rem; text-align: center;">Count</th>
                </tr>
            </thead>
            <tbody>
                {% for item in summary %}
                <tr style="border-bottom: 1px solid #eee;">
                    <td style="padding: 1rem; text-align: center;">{{ item.typeId__displayName }}</td>
                    <td style="padding: 1rem; text-align: center;">{{ item.vote }}</td>
                    <td style="padding: 1rem; text-align: center;">{{ item.vote_count }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <p style="text-align: center; margin-top: 2rem; font-size: 1.2rem;">No votes recorded for this session yet.</p>
    {% endif %}
</div>
{% endblock %}
